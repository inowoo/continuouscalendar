<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本のカレンダー</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        canvas {
            max-width: 100%;
            max-height: 90vh;
            border: 1px solid #ddd;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        @media (min-width: 768px) {
            canvas {
                width: 500px;
                height: 450px;
            }
        }
    </style>
</head>
<body>
    <canvas id="calendar"></canvas>
    <script>
        const canvas = document.getElementById('calendar');
        const ctx = canvas.getContext('2d');
        
        // 日本の祝日データ (2025-2026)
        const holidays = {
            '2025-12-31': true,
            '2026-01-01': true,
            '2026-01-12': true
        };
        
        function getCalendarData() {
            const today = new Date();
            const startDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            
            const calendarData = [];
            for (let i = 0; i < 35; i++) { // 5週間 = 35日
                const date = new Date(startDate.getTime() + i * 24 * 60 * 60 * 1000);
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const weekday = date.getDay(); // 0=日曜, 6=土曜
                const dateStr = `${year}-${month.toString().padStart(2,'0')}-${day.toString().padStart(2,'0')}`;
                
                const isWeekend = weekday === 0 || weekday === 6;
                const isHoliday = holidays[dateStr];
                const isSpecialGray = (year === 2025 && month === 12 && day >= 29) || 
                                    (year === 2026 && month === 1 && day <= 4);
                
                calendarData.push({
                    date: dateStr,
                    display: `${month}/${day}`,
                    weekday: weekday,
                    isWeekend: isWeekend,
                    isHoliday: isHoliday,
                    isSpecialGray: isSpecialGray
                });
            }
            return calendarData;
        }
        
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            const maxWeekHeight = window.innerHeight * 0.7;
            const cellWidth = Math.min(rect.width / 7, 80);
            const cellHeight = Math.min(cellWidth * 1.1, maxWeekHeight / 5);
            canvas.width = cellWidth * 7;
            canvas.height = cellHeight * 5 + 30;
        }
        
        function drawCalendar() {
            const calendarData = getCalendarData();
            resizeCanvas();
            
            const cellWidth = canvas.width / 7;
            const cellHeight = (canvas.height - 30) / 5;
            const fontSize = Math.max(cellWidth / 4, 12);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ヘッダー（今日の日付を表示）
            const today = new Date();
            const headerText = `${today.getFullYear()}/${(today.getMonth()+1).toString().padStart(2,'0')}/${today.getDate().toString().padStart(2,'0')} から 5週間`;
            ctx.fillStyle = '#333';
            ctx.font = `bold ${fontSize}px sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(headerText, canvas.width / 2, 15);
            
            // 週ごと描画
            for (let week = 0; week < 5; week++) {
                for (let day = 0; day < 7; day++) {
                    const idx = week * 7 + day;
                    const data = calendarData[idx];
                    if (!data) continue;
                    
                    const x = day * cellWidth;
                    const y = 30 + week * cellHeight;
                    
                    // グレーの判定: 土日 or 祝日 or 特別グレー(12/29-1/4)
                    const isGray = data.isWeekend || data.isHoliday || data.isSpecialGray;
                    
                    // マス背景
                    ctx.fillStyle = isGray ? '#e0e0e0' : '#ffffff';
                    ctx.fillRect(x + 2, y + 2, cellWidth - 4, cellHeight - 4);
                    
                    // 枠線
                    ctx.strokeStyle = '#ddd';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(x + 2, y + 2, cellWidth - 4, cellHeight - 4);
                    
                    // 日付テキスト
                    ctx.fillStyle = isGray ? '#888' : '#333';
                    ctx.font = `${fontSize}px sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(data.display, x + cellWidth / 2, y + cellHeight / 2);
                }
            }
        }
        
        window.addEventListener('resize', drawCalendar);
        window.addEventListener('load', drawCalendar); // ページロード時に実行
        
        // 定期更新（1時間ごと）
        setInterval(drawCalendar, 3600000);
    </script>
</body>
</html>

